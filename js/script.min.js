try{var popup_overlay=document.querySelector(".modal-overlay"),link=document.querySelector(".relation-back-link"),popup=document.querySelector(".modal-relation-back"),close=popup.querySelector(".modal-close"),form=popup.querySelector(".relation-back-form"),client_name=popup.querySelector("[name=your-name]"),client_email=popup.querySelector("[name=your-email]"),client_text=popup.querySelector("[name=your-text]"),isStorageSupport=!0,storage="";try{storage[0]=localStorage.getItem("your-name"),storage[1]=localStorage.getItem("your-email"),storage[2]=localStorage.getItem("your-text")}catch(e){isStorageSupport=!1}link.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("modal-show"),popup_overlay.classList.add("modal-overlay-show"),storage[0]?(client_name.value=storage[0],storage[1]?(client_email.value=storage[1],storage[2]?client_text.value=storage[2]:client_text.focus()):client_email.focus()):client_name.focus()}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("modal-show"),popup.classList.remove("modal-error"),popup_overlay.classList.remove("modal-overlay-show")}),form.addEventListener("submit",function(e){client_name.value?isStorageSupport&&localStorage.setItem("client-name",client_name.value):(e.preventDefault(),popup.classList.remove("modal-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-error"),console.log("Нужно ввести имя")),client_email.value?isStorageSupport&&localStorage.setItem("client-email",client_email.value):(e.preventDefault(),popup.classList.remove("modal-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-error"),console.log("Нужно ввести электронную почту")),client_text.value?isStorageSupport&&localStorage.setItem("client-text",client_text.value):(e.preventDefault(),popup.classList.remove("modal-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("modal-error"),console.log("Нужно ввести текст сообщения"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),popup.classList.contains("modal-show")&&(popup.classList.remove("modal-show"),popup.classList.remove("modal-error"),popup_overlay.classList.remove("modal-overlay-show")))})}catch(e){var range={min:0,max:700,step:50},rangeBar=(form=document.querySelector(".filter-search-form"),document.querySelector(".range-bar")),leverMin=document.querySelector(".range-lever-min"),leverMax=document.querySelector(".range-lever-max"),scaleLength=document.querySelector(".range-scale").offsetWidth;form.price[0].step=range.step,form.price[0].step=range.step,form.price[1].max=range.max;var onValuesGetting=function(){var e=form.price[0].value,t=form.price[1].value,o=scaleLength*e/range.max+"px",r=scaleLength*t/range.max+"px";form.priceOutput[0].value=e,form.priceOutput[1].value=t,form.price[0].max=t,form.price[1].min=e,rangeBar.style.left=o,rangeBar.style.right="calc(100% - "+r+")",leverMin.style.left="calc("+o+" - "+leverMin.offsetWidth/2+"px)",leverMax.style.left="calc("+r+" - "+leverMax.offsetWidth/2+"px)"},onLeverGrabbing=function(e){e.preventDefault();var t="touchstart"===e.type,o=t?"touchmove":"mousemove",r=t?"touchend":"mouseup",a=e.target===leverMin?form.price[0]:form.price[1],l=t?e.changedTouches[0].pageX:e.pageX,n=l,s=parseInt(a.value,10),p=function(e){n=t?e.changedTouches[0].pageX:e.pageX,a.value=Math.round((n-l)*range.max/(range.step*scaleLength))*range.step+s,onValuesGetting()},c=function(e){e.preventDefault(),document.removeEventListener(o,p),document.removeEventListener(r,c)};document.addEventListener(o,p),document.addEventListener(r,c)};form.addEventListener("change",onValuesGetting),leverMin.addEventListener("mousedown",onLeverGrabbing),leverMax.addEventListener("mousedown",onLeverGrabbing),leverMin.addEventListener("touchstart",onLeverGrabbing),leverMax.addEventListener("touchstart",onLeverGrabbing),onValuesGetting()}